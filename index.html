<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>网站导航 - 闲沐工坊</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 九宫格验证界面 -->
    <div id="grid-verify" class="grid-verify-container">
        <div class="verify-content">
            <h1>验证访问</h1>
            <p class="verify-hint">请按正确顺序点击汉字</p>
            <div class="grid-container">
                <div class="grid-item" data-num="7">书</div>
                <div class="grid-item" data-num="8">山</div>
                <div class="grid-item" data-num="9">路</div>
                <div class="grid-item" data-num="4">海</div>
                <div class="grid-item" data-num="5">无</div>
                <div class="grid-item" data-num="6">勤</div>
                <div class="grid-item" data-num="1">学</div>
                <div class="grid-item" data-num="2">涯</div>
                <div class="grid-item" data-num="3">苦</div>
            </div>
            <div class="verify-input-display">
                <span id="input-display">已输入: </span>
            </div>
            <button id="reset-btn" class="reset-btn">重置</button>
        </div>
    </div>
    
    <div class="container" id="main-container" style="display: none;">
        <header>
            <h1>个人网站导航</h1>
        </header>
        
        <main>
            <div id="categories-container">
                <!-- 分类和网站卡片将通过JavaScript动态加载 -->
            </div>
        </main>
    </div>
    
    <!-- 添加网站的模态框 -->
    <div id="add-site-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>添加网站</h2>
            <form id="add-site-form">
                <label for="modal-site-category">分类:</label>
                <select id="modal-site-category"></select>
                <label for="modal-site-name">网站名称:</label>
                <input type="text" id="modal-site-name" placeholder="网站名称" required>
                <label for="modal-site-url">网站链接:</label>
                <input type="url" id="modal-site-url" placeholder="网站链接" required>
                <button type="submit">添加网站</button>
            </form>
        </div>
    </div>
    
    <!-- 编辑网站的模态框 -->
    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>编辑网站</h2>
            <form id="edit-site-form">
                <input type="hidden" id="edit-site-id">
                <label for="edit-site-category">分类:</label>
                <select id="edit-site-category"></select>
                <label for="edit-site-name">网站名称:</label>
                <input type="text" id="edit-site-name" required>
                <label for="edit-site-url">网站链接:</label>
                <input type="url" id="edit-site-url" required>
                <label>背景色:</label>
                <div id="color-picker">
                    <div class="color-option" data-color="" title="默认">默认</div>
                    <div class="color-option" data-color="#B2F2BB" style="background-color: #B2F2BB;" title="薄荷绿"></div>
                    <div class="color-option" data-color="#FFB3BA" style="background-color: #FFB3BA;" title="浅珊瑚色"></div>
                    <div class="color-option" data-color="#A3D9FF" style="background-color: #A3D9FF;" title="淡蓝色"></div>
                    <div class="color-option" data-color="#D6B3FF" style="background-color: #D6B3FF;" title="薰衣草紫"></div>
                    <div class="color-option" data-color="#FFF3B0" style="background-color: #FFF3B0;" title="浅金色"></div>
                </div>
                <input type="hidden" id="edit-site-bg-color" value="">
                <button type="submit">保存</button>
            </form>
        </div>
    </div>
    
    <!-- 悬浮添加按钮 -->
    <div id="floating-add-btn" class="floating-btn">
        +
    </div>
    
    <script src="script.js"></script>
    <script>
        // 九宫格验证逻辑
        const correctSequence = '14863';
        let userInput = '';
        
        document.addEventListener('DOMContentLoaded', () => {
            const gridItems = document.querySelectorAll('.grid-item');
            const inputDisplay = document.getElementById('input-display');
            const resetBtn = document.getElementById('reset-btn');
            const gridVerify = document.getElementById('grid-verify');
            const mainContainer = document.getElementById('main-container');
            
            // 检查是否已验证过
            if (sessionStorage.getItem('verified') === 'true') {
                gridVerify.style.display = 'none';
                mainContainer.style.display = 'block';
                return;
            }
            
            gridItems.forEach(item => {
                item.addEventListener('click', () => {
                    const num = item.getAttribute('data-num');
                    userInput += num;
                    inputDisplay.textContent = '已输入: ' + userInput;
                    
                    // 添加点击效果
                    item.classList.add('clicked');
                    setTimeout(() => {
                        item.classList.remove('clicked');
                    }, 300);
                    
                    // 检查是否达到正确长度
                    if (userInput.length === correctSequence.length) {
                        if (userInput === correctSequence) {
                            // 验证成功
                            sessionStorage.setItem('verified', 'true');
                            gridVerify.classList.add('verify-success');
                            setTimeout(() => {
                                gridVerify.style.display = 'none';
                                mainContainer.style.display = 'block';
                            }, 500);
                        } else {
                            // 验证失败
                            inputDisplay.textContent = '错误，请重试';
                            inputDisplay.style.color = '#ff6b6b';
                            setTimeout(() => {
                                userInput = '';
                                inputDisplay.textContent = '已输入: ';
                                inputDisplay.style.color = 'white';
                            }, 1000);
                        }
                    }
                });
            });
            
            resetBtn.addEventListener('click', () => {
                userInput = '';
                inputDisplay.textContent = '已输入: ';
                inputDisplay.style.color = 'white';
            });
        });
    </script>
</body>
</html>